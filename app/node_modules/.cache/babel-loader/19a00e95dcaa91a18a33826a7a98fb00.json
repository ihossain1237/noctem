{"ast":null,"code":"import _defineProperty from \"/home/imran/Desktop/noctem/app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { ADD_TO_CART, CLEAR_CART, DELETE_FROM_CART, REMOVE_FROM_CART } from \"../action.types\";\nimport appData from \"../../api/appData\";\nexport const cartOperation = function (op, items, targetItem, targetEmail) {\n  let updatedItems = [];\n\n  if (op === CLEAR_CART) {\n    updatedItems = [];\n    updateCart(targetEmail, targetItem);\n    return updatedItems;\n  }\n\n  const existingCartItem = items.find(item => item._id === targetItem._id);\n\n  if (op === ADD_TO_CART) {\n    if (existingCartItem) {\n      updatedItems = items.map(item => item._id === targetItem._id ? _objectSpread({}, item, {\n        itemCount: item.itemCount + 1\n      }) : item);\n    } else {\n      updatedItems = [...items, _objectSpread({}, targetItem, {\n        itemCount: 1\n      })];\n    }\n  }\n\n  const deleteItem = () => items.filter(item => item._id !== targetItem._id);\n\n  if (op === REMOVE_FROM_CART) {\n    if (existingCartItem.itemCount === 1) {\n      updatedItems = items.filter(item => item._id !== targetItem._id);\n    } else if (existingCartItem.itemCount > 1) {\n      updatedItems = items.map(item => item._id === targetItem._id ? _objectSpread({}, item, {\n        itemCount: item.itemCount - 1\n      }) : item);\n    } else {\n      updatedItems = deleteItem();\n    }\n  }\n\n  if (op === DELETE_FROM_CART) updatedItems = deleteItem();\n  updateCart(targetEmail, updatedItems);\n  return updatedItems;\n};\nexport const updateCart = async (email, items) => {\n  if (email && items) {\n    const body = JSON.stringify({\n      email,\n      items\n    });\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const res = await appData.post('/cart/update', body, config);\n  }\n};","map":{"version":3,"sources":["/home/imran/Desktop/noctem/app/src/redux/cart/cart.utils.js"],"names":["ADD_TO_CART","CLEAR_CART","DELETE_FROM_CART","REMOVE_FROM_CART","appData","cartOperation","op","items","targetItem","targetEmail","updatedItems","updateCart","existingCartItem","find","item","_id","map","itemCount","deleteItem","filter","email","body","JSON","stringify","config","headers","res","post"],"mappings":";;;;;;AAAA,SAAQA,WAAR,EAAqBC,UAArB,EAAiCC,gBAAjC,EAAmDC,gBAAnD,QAA0E,iBAA1E;AACA,OAAOC,OAAP,MAAoB,mBAApB;AAGA,OAAO,MAAMC,aAAa,GAAG,UAASC,EAAT,EAAYC,KAAZ,EAAkBC,UAAlB,EAA6BC,WAA7B,EAAyC;AAElE,MAAIC,YAAY,GAAG,EAAnB;;AACA,MAAIJ,EAAE,KAAGL,UAAT,EAAqB;AACjBS,IAAAA,YAAY,GAAG,EAAf;AACAC,IAAAA,UAAU,CAACF,WAAD,EAAaD,UAAb,CAAV;AACA,WAAOE,YAAP;AACH;;AACD,QAAME,gBAAgB,GAAGL,KAAK,CAACM,IAAN,CACvBC,IAAI,IAAIA,IAAI,CAACC,GAAL,KAAYP,UAAU,CAACO,GADR,CAAzB;;AAIA,MAAIT,EAAE,KAAGN,WAAT,EAAqB;AACjB,QAAIY,gBAAJ,EAAqB;AACjBF,MAAAA,YAAY,GAAGH,KAAK,CAACS,GAAN,CAAUF,IAAI,IAAEA,IAAI,CAACC,GAAL,KAAWP,UAAU,CAACO,GAAtB,qBAA8BD,IAA9B;AAAmCG,QAAAA,SAAS,EAACH,IAAI,CAACG,SAAL,GAAe;AAA5D,WAA+DH,IAA/E,CAAf;AACH,KAFD,MAEM;AACFJ,MAAAA,YAAY,GAAG,CAAC,GAAGH,KAAJ,oBAAcC,UAAd;AAAyBS,QAAAA,SAAS,EAAC;AAAnC,SAAf;AACH;AACJ;;AACD,QAAMC,UAAU,GAAG,MAAIX,KAAK,CAACY,MAAN,CAAaL,IAAI,IAAEA,IAAI,CAACC,GAAL,KAAWP,UAAU,CAACO,GAAzC,CAAvB;;AACA,MAAIT,EAAE,KAAGH,gBAAT,EAA0B;AACtB,QAAIS,gBAAgB,CAACK,SAAjB,KAA6B,CAAjC,EAAmC;AAC/BP,MAAAA,YAAY,GAAIH,KAAK,CAACY,MAAN,CAAaL,IAAI,IAAEA,IAAI,CAACC,GAAL,KAAWP,UAAU,CAACO,GAAzC,CAAhB;AACH,KAFD,MAEM,IAAIH,gBAAgB,CAACK,SAAjB,GAA2B,CAA/B,EAAiC;AACnCP,MAAAA,YAAY,GAAGH,KAAK,CAACS,GAAN,CAAUF,IAAI,IAAEA,IAAI,CAACC,GAAL,KAAWP,UAAU,CAACO,GAAtB,qBAA8BD,IAA9B;AAAmCG,QAAAA,SAAS,EAACH,IAAI,CAACG,SAAL,GAAe;AAA5D,WAA+DH,IAA/E,CAAf;AACH,KAFK,MAED;AACDJ,MAAAA,YAAY,GAAGQ,UAAU,EAAzB;AACH;AACJ;;AACD,MAAIZ,EAAE,KAAGJ,gBAAT,EACIQ,YAAY,GAAGQ,UAAU,EAAzB;AAGJP,EAAAA,UAAU,CAACF,WAAD,EAAaC,YAAb,CAAV;AACA,SAAOA,YAAP;AAEH,CApCM;AAwCP,OAAO,MAAMC,UAAU,GAAE,OAAOS,KAAP,EAAab,KAAb,KAAqB;AAC1C,MAAIa,KAAK,IAAEb,KAAX,EAAiB;AAEb,UAAMc,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAe;AAACH,MAAAA,KAAD;AAAOb,MAAAA;AAAP,KAAf,CAAb;AACA,UAAMiB,MAAM,GAAG;AACXC,MAAAA,OAAO,EAAC;AACJ,wBAAe;AADX;AADG,KAAf;AAKA,UAAMC,GAAG,GAAG,MAAMtB,OAAO,CAACuB,IAAR,CAAa,cAAb,EAA4BN,IAA5B,EAAiCG,MAAjC,CAAlB;AAEP;AAAC,CAXK","sourcesContent":["import {ADD_TO_CART, CLEAR_CART, DELETE_FROM_CART, REMOVE_FROM_CART} from \"../action.types\";\nimport appData from \"../../api/appData\";\n\n\nexport const cartOperation = function(op,items,targetItem,targetEmail){\n\n    let updatedItems = [];\n    if (op===CLEAR_CART) {\n        updatedItems = [];\n        updateCart(targetEmail,targetItem);\n        return updatedItems;\n    }\n    const existingCartItem = items.find(\n      item => item._id ===targetItem._id\n    );\n\n    if (op===ADD_TO_CART){\n        if (existingCartItem){\n            updatedItems = items.map(item=>item._id===targetItem._id?{...item,itemCount:item.itemCount+1}:item);\n        }else {\n            updatedItems = [...items,{...targetItem,itemCount:1}];\n        }\n    }\n    const deleteItem = ()=>items.filter(item=>item._id!==targetItem._id);\n    if (op===REMOVE_FROM_CART){\n        if (existingCartItem.itemCount===1){\n            updatedItems =  items.filter(item=>item._id!==targetItem._id);\n        }else if (existingCartItem.itemCount>1){\n            updatedItems = items.map(item=>item._id===targetItem._id?{...item,itemCount:item.itemCount-1}:item)\n        }else{\n            updatedItems = deleteItem();\n        }\n    }\n    if (op===DELETE_FROM_CART)\n        updatedItems = deleteItem();\n\n\n    updateCart(targetEmail,updatedItems);\n    return updatedItems;\n\n};\n\n\n\nexport const updateCart =async (email,items)=>{\n    if (email&&items){\n\n        const body = JSON.stringify({email,items});\n        const config = {\n            headers:{\n                \"Content-Type\":\"application/json\"\n            }\n        };\n        const res = await appData.post('/cart/update',body,config);\n\n}};"]},"metadata":{},"sourceType":"module"}